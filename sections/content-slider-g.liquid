{% comment %}
  Section: Content Slider (Rewritten)
  - Modern implementation with proper responsive design
  - Supports image, video, and mixed content slides
  - Full theme editor integration with comprehensive settings
{% endcomment %}

{%- liquid
  assign section_height_desktop = section.settings.section_height_desktop | default: 600
  assign section_height_mobile = section.settings.section_height_mobile | default: 400
  assign section_width = section.settings.section_width | default: 'container'
  assign slide_count = section.blocks.size
-%}

<style>
  /* Section Container Styles */
  .content-slider-section-{{ section.id }} {
    position: relative;
    width: 100%;
    overflow: hidden;
    {%- if section.settings.section_background_type == 'color' and section.settings.section_background_color != blank -%}
      background-color: {{ section.settings.section_background_color }};
    {%- elsif section.settings.section_background_type == 'image' and section.settings.section_background_image != blank -%}
      background-image: url('{{ section.settings.section_background_image | image_url: width: 1920 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    {%- endif -%}
  }


  /* Width Container Classes */
  .content-slider-section-{{ section.id }} .width-container {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .content-slider-section-{{ section.id }} .width-container.full-width {
    max-width: none;
  }

  .content-slider-section-{{ section.id }} .width-container.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .content-slider-section-{{ section.id }} .width-container.container-wide {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  /* Slick Slider Container */
  .content-slider-{{ section.id }} {
    width: 100%;
    height: {{ section_height_mobile }}px;
    position: relative;
  }

  @media (min-width: 768px) {
    .content-slider-{{ section.id }} {
      height: {{ section_height_desktop }}px;
    }
  }

  /* Ensure the slider track itself is transparent */
  .content-slider-{{ section.id }} .slick-track {
    background-color: transparent;
  }


  /* Individual Slide Styles */
  .content-slider-{{ section.id }} .slide-item {
    width: 100%;
    height: {{ section_height_mobile }}px;
    position: relative;
    outline: none;
    background-color: transparent;
  }

  @media (min-width: 768px) {
    .content-slider-{{ section.id }} .slide-item {
      height: {{ section_height_desktop }}px;
    }
  }


  /* Slide Content */
  .content-slider-{{ section.id }} .slide-content {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Content Width Options */
  .content-slider-{{ section.id }} .content-inner {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .content-slider-{{ section.id }} .content-inner.full-width {
    max-width: none;
  }

  .content-slider-{{ section.id }} .content-inner.fixed-width {
    max-width: var(--content-max-width);
  }

  .content-slider-{{ section.id }} .content-inner.relative-width {
    width: var(--content-width-percent);
  }

  /* Optional Title Styles */
  .content-slider-{{ section.id }} .slide-title {
    position: absolute;
    top: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 3;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 1rem 2rem;
    border-radius: 4px;
    font-size: 1.8rem;
    font-weight: 600;
    text-align: center;
    max-width: 90%;
    box-sizing: border-box;
  }

  /* Image Slide Styles */
  .content-slider-{{ section.id }} .image-slide-content {
    width: 100%;
    height: 100%;
    background-color: transparent;
  }

  .content-slider-{{ section.id }} .image-slide-content img,
  .content-slider-{{ section.id }} .image-slide-content svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .content-slider-{{ section.id }} .image-slide-content a {
    display: block;
    width: 100%;
    height: 100%;
  }

  /* Video Slide Styles */
  .content-slider-{{ section.id }} .video-slide-content {
    width: 100%;
    height: 100%;
    position: relative;
    cursor: pointer;
  }

  .content-slider-{{ section.id }} .video-cover {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .content-slider-{{ section.id }} .video-cover img,
  .content-slider-{{ section.id }} .video-cover svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .content-slider-{{ section.id }} .video-play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 2;
    border: none;
    cursor: pointer;
  }

  .content-slider-{{ section.id }} .video-play-button:hover {
    transform: translate(-50%, -50%) scale(1.1);
    background: rgba(255, 255, 255, 1);
  }

  .content-slider-{{ section.id }} .video-play-button svg {
    width: 32px;
    height: 32px;
    fill: #333;
    margin-left: 4px;
  }

  .content-slider-{{ section.id }} .video-iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    z-index: 3;
  }

  .content-slider-{{ section.id }} .video-slide-content.playing .video-cover {
    opacity: 0;
  }

  .content-slider-{{ section.id }} .video-slide-content.playing .video-play-button {
    display: none;
  }

  /* Mixed Content Slide Styles */
  .content-slider-{{ section.id }} .mixed-content-slide {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  @media (min-width: 768px) {
    .content-slider-{{ section.id }} .mixed-content-slide {
      flex-direction: row;
      align-items: stretch;
    }

    .content-slider-{{ section.id }} .mixed-content-slide.layout-image-right {
      flex-direction: row-reverse;
    }
  }

  .content-slider-{{ section.id }} .mixed-content-image {
    position: relative;
    flex: 0 0 auto;
  }

  .content-slider-{{ section.id }} .mixed-content-image img {
    object-fit: cover;
    display: block;
  }

  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .mixed-content-image {
      height: 40%;
      min-height: 200px;
    }
  }

  .content-slider-{{ section.id }} .mixed-content-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
  }

  .content-slider-{{ section.id }} .mixed-content-text-inner {
    width: 100%;
    box-sizing: border-box;
  }

  /* Text Content Styling */
  .content-slider-{{ section.id }} .text-content {
    margin-bottom: 2rem;
  }

  .content-slider-{{ section.id }} .text-content:last-child {
    margin-bottom: 0;
  }

  .content-slider-{{ section.id }} .text-content h1,
  .content-slider-{{ section.id }} .text-content h2,
  .content-slider-{{ section.id }} .text-content h3 {
    margin: 0 0 1rem 0;
    line-height: 1.2;
  }

  .content-slider-{{ section.id }} .text-content p {
    margin: 0 0 1rem 0;
    line-height: 1.5;
  }

  .content-slider-{{ section.id }} .text-content p:last-child {
    margin-bottom: 0;
  }


  /* Slick Slider Navigation */
  .content-slider-{{ section.id }} .slick-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex !important;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  .content-slider-{{ section.id }} .slick-arrow:hover {
    background: rgba(255, 255, 255, 1);
    transform: translateY(-50%) scale(1.1);
  }

  .content-slider-{{ section.id }} .slick-arrow svg {
    width: 20px;
    height: 20px;
    fill: #333;
  }

  .content-slider-{{ section.id }} .slick-prev {
    left: 2rem;
  }

  .content-slider-{{ section.id }} .slick-next {
    right: 2rem;
  }

  .content-slider-{{ section.id }} .slick-arrow.slick-disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Slick Dots */
  .content-slider-{{ section.id }} .slick-dots {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: flex !important;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 1rem;
  }

  .content-slider-{{ section.id }} .slick-dots li {
    margin: 0;
    padding: 0;
  }

  .content-slider-{{ section.id }} .slick-dots button {
    width: 12px;
    height: 12px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    text-indent: -9999px;
    transition: all 0.3s ease;
  }

  .content-slider-{{ section.id }} .slick-dots .slick-active button {
    background: rgba(255, 255, 255, 1);
    transform: scale(1.2);
  }

  /* Mobile Navigation Adjustments */
  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .slick-arrow {
      width: 40px;
      height: 40px;
    }

    .content-slider-{{ section.id }} .slick-prev {
      left: 1rem;
    }

    .content-slider-{{ section.id }} .slick-next {
      right: 1rem;
    }

    .content-slider-{{ section.id }} .slick-dots {
      bottom: 1rem;
    }
  }


  /* Single Block Display (No Slider) */
  .content-slider-{{ section.id }}:not([data-init-content-slider]) .slide-item {
    display: block !important;
    width: 100% !important;
    height: 100% !important;
  }

  /* Loading State */
  .content-slider-{{ section.id }}.loading {
    opacity: 0.5;
  }

  /* Error State */
  .content-slider-{{ section.id }} .error-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    z-index: 20;
  }
</style>

<section class="content-slider-section-{{ section.id }}">
  <!-- Width Container -->
  <div class="width-container {{ section_width }}">

    <!-- Main Slider Container -->
    <div
      class="content-slider-{{ section.id }}"
      id="content-slider-{{ section.id }}"
      data-show-dots="{{ section.settings.show_dots | default: true }}"
      {% if section.blocks.size > 1 %}data-init-content-slider data-autoplay="{{ section.settings.autoplay | default: false }}" data-autoplay-speed="{{ section.settings.autoplay_speed | default: 5000 }}" data-fade="{{ section.settings.fade_transition | default: false }}" data-infinite="{{ section.settings.infinite_scroll | default: true }}"{% endif %}
    >

      {%- for block in section.blocks -%}
        {%- liquid
          assign content_width_class = 'full-width'
          assign content_style = ''
          if block.settings.content_width_type == 'fixed'
            assign content_width_class = 'fixed-width'
            assign content_style = '--content-max-width: ' | append: block.settings.content_width_fixed | append: 'px;'
          elsif block.settings.content_width_type == 'relative'
            assign content_width_class = 'relative-width'
            assign content_style = '--content-width-percent: ' | append: block.settings.content_width_percent | append: '%;'
          endif

          assign padding_style = 'padding: ' | append: block.settings.content_padding_top | append: 'px ' | append: block.settings.content_padding_right | append: 'px ' | append: block.settings.content_padding_bottom | append: 'px ' | append: block.settings.content_padding_left | append: 'px;'
        -%}

        <div
          class="slide-item slide-block-{{ block.id }}" id="block-{{ block.id }}" data-index="{{ forloop.index }}" {{ block.shopify_attributes }}
        >
          <!-- Optional Title -->
          {%- if block.settings.title != blank -%}
            <div class="slide-title">{{ block.settings.title }}</div>
          {%- endif -%}

          <!-- Slide Content -->
          <div class="slide-content">
            <div class="content-inner {{ content_width_class }}" style="{{ content_style }} {{ padding_style }}">

              {%- case block.type -%}

                {%- when 'image_slide' -%}
                  <div class="image-slide-content">
                    {%- if block.settings.link != blank -%}<a href="{{ block.settings.link }}">{%- endif -%}

                    {%- if block.settings.image != blank -%}
                      {%- if block.settings.image_mobile != blank -%}
                        <picture>
                          <source media="(max-width: 767px)" srcset="{{ block.settings.image_mobile | image_url: width: 800 }}">
                          <img
                            src="{{ block.settings.image | image_url: width: 1920 }}"
                            alt="{{ block.settings.image.alt | escape }}"
                            loading="lazy"
                            width="1920"
                            height="{{ 1920 | divided_by: block.settings.image.aspect_ratio | round }}"
                          >
                        </picture>
                      {%- else -%}
                        <img
                          src="{{ block.settings.image | image_url: width: 1920 }}"
                          alt="{{ block.settings.image.alt | escape }}"
                          loading="lazy"
                          width="1920"
                          height="{{ 1920 | divided_by: block.settings.image.aspect_ratio | round }}"
                        >
                      {%- endif -%}
                    {%- else -%}
                      <img src="{{ 'placeholder.svg' | asset_url }}" class="placeholder-svg" alt="Product Placeholder" loading="lazy" />
                    {%- endif -%}

                    {%- if block.settings.link != blank -%}</a>{%- endif -%}
                  </div>

                {%- when 'video_slide' -%}
                  <div
                    class="video-slide-content"
                    data-video-source="{{ block.settings.video_source }}"
                    data-video-id="{% if block.settings.video_source == 'youtube' %}{{ block.settings.video_url.id }}{% elsif block.settings.video_source == 'vimeo' %}{{ block.settings.video_url.id }}{% else %}{{ block.settings.hosted_video_url }}{% endif %}"
                  >
                    <div class="video-cover">
                      {%- if block.settings.cover_image != blank -%}
                        <img
                          src="{{ block.settings.cover_image | image_url: width: 1920 }}"
                          alt="{{ block.settings.cover_image.alt | escape }}"
                          loading="lazy"
                          width="1920"
                          height="{{ 1920 | divided_by: block.settings.cover_image.aspect_ratio | round }}"
                        >
                      {%- else -%}
                        <img src="{{ 'placeholder.svg' | asset_url }}" class="placeholder-svg" alt="Product Placeholder" loading="lazy" />
                      {%- endif -%}
                    </div>

                    <button
                      class="video-play-button"
                      type="button"
                      aria-label="Play video"
                      data-video-trigger
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                        <path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/>
                      </svg>
                    </button>
                  </div>

                {%- when 'mixed_content_slide' -%}
                  {%- liquid
                    assign layout_class = 'layout-image-left'
                    if block.settings.layout == 'image_right'
                      assign layout_class = 'layout-image-right'
                    endif

                    assign image_width = block.settings.image_width | default: 400
                    assign image_margin = block.settings.image_margin | default: 20
                    assign text_padding = block.settings.text_padding | default: 40

                    assign image_style = 'width: ' | append: image_width | append: 'px; margin: ' | append: image_margin | append: 'px;'
                    assign text_style = 'padding: ' | append: text_padding | append: 'px;'
                  -%}

                  <div class="mixed-content-slide {{ layout_class }}">
                    <!-- Image Column -->
                    <div class="mixed-content-image" style="{{ image_style }}">
                      {%- if block.settings.image != blank -%}
                        {%- if block.settings.image_mobile != blank -%}
                          <picture>
                            <source media="(max-width: 767px)" srcset="{{ block.settings.image_mobile | image_url: width: 600 }}">
                            <img
                              src="{{ block.settings.image | image_url: width: 800 }}"
                              alt="{{ block.settings.image.alt | escape }}"
                              loading="lazy"
                            >
                          </picture>
                        {%- else -%}
                          <img
                            src="{{ block.settings.image | image_url: width: 800 }}"
                            alt="{{ block.settings.image.alt | escape }}"
                            loading="lazy"
                          >
                        {%- endif -%}
                      {%- else -%}
                        <img src="{{ 'placeholder.svg' | asset_url }}" class="placeholder-svg" alt="Product Placeholder" loading="lazy" />
                      {%- endif -%}
                    </div>

                    <!-- Text Column -->
                    <div class="mixed-content-text">
                      <div class="mixed-content-text-inner" style="{{ text_style }}">

                        {%- if block.settings.text_content_1 != blank -%}
                          <div class="text-content text-content-1" style="color: {{ block.settings.text_color_1 | default: '#333' }}; font-size: {{ block.settings.text_size_1 | default: 16 }}px; text-align: {{ block.settings.text_align_1 | default: 'left' }};">
                            {{ block.settings.text_content_1 }}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.text_content_2 != blank -%}
                          <div class="text-content text-content-2" style="color: {{ block.settings.text_color_2 | default: '#666' }}; font-size: {{ block.settings.text_size_2 | default: 14 }}px; text-align: {{ block.settings.text_align_2 | default: 'left' }};">
                            {{ block.settings.text_content_2 }}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.text_content_3 != blank -%}
                          <div class="text-content text-content-3" style="color: {{ block.settings.text_color_3 | default: '#999' }}; font-size: {{ block.settings.text_size_3 | default: 12 }}px; text-align: {{ block.settings.text_align_3 | default: 'left' }};">
                            {{ block.settings.text_content_3 }}
                          </div>
                        {%- endif -%}

                      </div>
                    </div>
                  </div>

              {%- endcase -%}

            </div>
          </div>
        </div>

      {%- endfor -%}

    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Only initialize slider if data-init-content-slider exists (multiple blocks)
  const sliderElements = document.querySelectorAll('[data-init-content-slider]');

  if (!sliderElements.length || !window.jQuery) {
    // No sliders to initialize or jQuery missing
    return;
  }

  const $ = window.jQuery;

  sliderElements.forEach(function(sliderElement) {
    const $slider = $(sliderElement);

    // Get settings from data attributes
    const autoplay = $slider.data('autoplay') === true || $slider.data('autoplay') === 'true';
    const autoplaySpeed = parseInt($slider.data('autoplay-speed')) || 5000;
    const showArrows = false;
    const showDots = $slider.data('show-dots') === true || $slider.data('show-dots') === 'true';
    const fade = $slider.data('fade') === true || $slider.data('fade') === 'true';
    const infinite = $slider.data('infinite') === true || $slider.data('infinite') === 'true';

    // Initialize Slick slider only if not already initialized
  try {
    $slider.addClass('loading');

    $slider.slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: autoplay,
      autoplaySpeed: autoplaySpeed,
      arrows: showArrows,
      dots: showDots,
      fade: fade,
      infinite: infinite,
      speed: 500,
      cssEase: 'ease-in-out',
      adaptiveHeight: false,
      pauseOnHover: true,
      pauseOnFocus: true,
      accessibility: true,
      focusOnSelect: false,
      lazyLoad: 'ondemand',
      respondTo: 'window',
      prevArrow: '<button type="button" class="slick-prev" aria-label="Previous slide"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/></svg></button>',
      nextArrow: '<button type="button" class="slick-next" aria-label="Next slide"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/></svg></button>'
    });

    // Remove loading state after initialization
    $slider.on('init', function() {
      $slider.removeClass('loading');
    });

  } catch (error) {
    console.error('Content Slider: Failed to initialize Slick slider', error);
    $slider.removeClass('loading');

    // Show error message
    $slider.append('<div class="error-message">Slider failed to load. Please refresh the page.</div>');
  }

  // Video functionality
  function initVideoHandlers() {
    $slider.on('click', '[data-video-trigger]', function(e) {
      e.preventDefault();

      const $button = $(this);
      const $videoSlide = $button.closest('.video-slide-content');
      const videoSource = $videoSlide.data('video-source');
      const videoId = $videoSlide.data('video-id');

      if (!videoSource || !videoId || $videoSlide.hasClass('playing')) {
        return;
      }

      let embedUrl = '';
      let videoElement = '';

      try {
        // Pause slider autoplay when video starts
        if (autoplay) {
          $slider.slick('slickPause');
        }

        // Generate video embed based on source
        switch (videoSource) {
          case 'youtube':
            embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&rel=0&modestbranding=1`;
            videoElement = `<iframe class="video-iframe" src="${embedUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            break;

          case 'vimeo':
            embedUrl = `https://player.vimeo.com/video/${videoId}?autoplay=1&muted=1&background=1`;
            videoElement = `<iframe class="video-iframe" src="${embedUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            break;

          case 'mp4':
            videoElement = `<video class="video-iframe" controls autoplay muted playsinline><source src="${videoId}" type="video/mp4">Your browser does not support the video tag.</video>`;
            break;

          default:
            console.warn('Content Slider: Unknown video source', videoSource);
            return;
        }

        // Add video element and mark as playing
        $videoSlide.addClass('playing').append(videoElement);

        // Add error handling for iframes
        const $iframe = $videoSlide.find('.video-iframe');
        $iframe.on('error load', function(e) {
          if (e.type === 'error') {
            console.error('Content Slider: Video failed to load', embedUrl);
            $videoSlide.removeClass('playing').find('.video-iframe').remove();

            // Resume autoplay on error
            if (autoplay) {
              $slider.slick('slickPlay');
            }
          }
        });

      } catch (error) {
        console.error('Content Slider: Video initialization error', error);
        $videoSlide.removeClass('playing');

        // Resume autoplay on error
        if (autoplay) {
          $slider.slick('slickPlay');
        }
      }
    });
  }

  // Clean up videos when slide changes
  function initSlideChangeHandlers() {
    $slider.on('beforeChange', function(event, slick, currentSlide, nextSlide) {
      // Clean up any playing videos
      const $currentSlide = $(slick.$slides[currentSlide]);
      const $videoSlide = $currentSlide.find('.video-slide-content.playing');

      if ($videoSlide.length) {
        $videoSlide.removeClass('playing').find('.video-iframe').remove();

        // Resume autoplay when video stops
        if (autoplay) {
          setTimeout(() => {
            $slider.slick('slickPlay');
          }, 100);
        }
      }
    });

    // Handle slide focus for accessibility
    $slider.on('afterChange', function(event, slick, currentSlide) {
      const $currentSlide = $(slick.$slides[currentSlide]);
      $currentSlide.attr('aria-hidden', 'false').siblings().attr('aria-hidden', 'true');
    });
  }

  // Initialize all handlers
  initVideoHandlers();
  initSlideChangeHandlers();

  // Handle window resize
  let resizeTimer;
  $(window).on('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
      if ($slider.hasClass('slick-initialized')) {
        $slider.slick('setPosition');
      }
    }, 250);
  });

    // Cleanup on page unload
    $(window).on('beforeunload', function() {
      if ($slider.hasClass('slick-initialized')) {
        $slider.slick('unslick');
      }
    });

  }); // End forEach loop
});
</script>

{% schema %}
{
  "name": "Content Slider G",
  "tag": "section",
  "class": "section-content-slider",
  "max_blocks": 8,
  "settings": [
    {
      "type": "header",
      "content": "Section Layout"
    },
    {
      "type": "range",
      "id": "section_height_desktop",
      "min": 300,
      "max": 1000,
      "step": 25,
      "unit": "px",
      "label": "Desktop height",
      "default": 600
    },
    {
      "type": "range",
      "id": "section_height_mobile",
      "min": 200,
      "max": 700,
      "step": 25,
      "unit": "px",
      "label": "Mobile height",
      "default": 400
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        { "value": "full-width", "label": "Full width" },
        { "value": "container", "label": "Container (1200px)" },
        { "value": "container-wide", "label": "Wide container (1400px)" }
      ],
      "default": "full-width"
    },
    {
      "type": "header",
      "content": "Section Background"
    },
    {
      "type": "select",
      "id": "section_background_type",
      "label": "Background type",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "color", "label": "Color" },
        { "value": "image", "label": "Image" }
      ],
      "default": "none"
    },
    {
      "type": "color",
      "id": "section_background_color",
      "label": "Background color"
    },
    {
      "type": "image_picker",
      "id": "section_background_image",
      "label": "Background image"
    },
    {
      "type": "header",
      "content": "Slider Controls"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay slides",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 2000,
      "max": 9500,
      "step": 500,
      "unit": "ms",
      "label": "Autoplay speed",
      "default": 5000
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show pagination dots",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "fade_transition",
      "label": "Use fade transition",
      "default": false,
      "info": "Uses fade instead of slide transition"
    },
    {
      "type": "checkbox",
      "id": "infinite_scroll",
      "label": "Infinite scrolling",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "image_slide",
      "name": "Image Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (optional)",
          "info": "Appears as overlay on slide"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Desktop image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Mobile image (optional)",
          "info": "Different image for mobile screens"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link URL",
          "info": "Makes entire slide clickable"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "content_width_type",
          "label": "Content width",
          "options": [
            { "value": "full", "label": "Full width" },
            { "value": "fixed", "label": "Fixed pixels" },
            { "value": "relative", "label": "Percentage" }
          ],
          "default": "full"
        },
        {
          "type": "range",
          "id": "content_width_fixed",
          "min": 600,
          "max": 1400,
          "step": 50,
          "unit": "px",
          "label": "Fixed width",
          "default": 1200
        },
        {
          "type": "range",
          "id": "content_width_percent",
          "min": 50,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Width percentage",
          "default": 80
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "content_padding_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding top",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding right",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding left",
          "default": 0
        }
      ]
    },
    {
      "type": "video_slide",
      "name": "Video Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (optional)",
          "info": "Appears as overlay on slide"
        },
        {
          "type": "image_picker",
          "id": "cover_image",
          "label": "Cover image",
          "info": "Shown before video plays"
        },
        {
          "type": "select",
          "id": "video_source",
          "label": "Video source",
          "options": [
            { "value": "youtube", "label": "YouTube" },
            { "value": "vimeo", "label": "Vimeo" },
            { "value": "mp4", "label": "MP4 file" }
          ],
          "default": "youtube"
        },
        {
          "type": "video_url",
          "id": "video_url",
          "label": "YouTube or Vimeo URL",
          "accept": ["youtube", "vimeo"]
        },
        {
          "type": "text",
          "id": "hosted_video_url",
          "label": "MP4 video URL",
          "info": "Direct link to MP4 file"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "content_width_type",
          "label": "Content width",
          "options": [
            { "value": "full", "label": "Full width" },
            { "value": "fixed", "label": "Fixed pixels" },
            { "value": "relative", "label": "Percentage" }
          ],
          "default": "full"
        },
        {
          "type": "range",
          "id": "content_width_fixed",
          "min": 600,
          "max": 1400,
          "step": 50,
          "unit": "px",
          "label": "Fixed width",
          "default": 1200
        },
        {
          "type": "range",
          "id": "content_width_percent",
          "min": 50,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Width percentage",
          "default": 80
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "content_padding_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding top",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding right",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding left",
          "default": 0
        }
      ]
    },
    {
      "type": "mixed_content_slide",
      "name": "Mixed Content Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (optional)",
          "info": "Appears as overlay on slide"
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            { "value": "image_left", "label": "Image left, text right" },
            { "value": "image_right", "label": "Image right, text left" }
          ],
          "default": "image_left"
        },
        {
          "type": "header",
          "content": "Image Settings"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Desktop image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Mobile image (optional)"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 200,
          "max": 600,
          "step": 20,
          "unit": "px",
          "label": "Image width",
          "default": 400
        },
        {
          "type": "range",
          "id": "image_margin",
          "min": 0,
          "max": 50,
          "step": 5,
          "unit": "px",
          "label": "Image margin",
          "default": 20
        },
        {
          "type": "header",
          "content": "Text Content"
        },
        {
          "type": "range",
          "id": "text_padding",
          "min": 20,
          "max": 80,
          "step": 10,
          "unit": "px",
          "label": "Text column padding",
          "default": 40
        },
        {
          "type": "header",
          "content": "Text Block 1"
        },
        {
          "type": "richtext",
          "id": "text_content_1",
          "label": "Text content 1",
          "default": "<h2>Your heading here</h2>"
        },
        {
          "type": "color",
          "id": "text_color_1",
          "label": "Text color 1",
          "default": "#333333"
        },
        {
          "type": "range",
          "id": "text_size_1",
          "min": 12,
          "max": 36,
          "step": 1,
          "unit": "px",
          "label": "Font size 1",
          "default": 24
        },
        {
          "type": "select",
          "id": "text_align_1",
          "label": "Text alignment 1",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "left"
        },
        {
          "type": "header",
          "content": "Text Block 2"
        },
        {
          "type": "richtext",
          "id": "text_content_2",
          "label": "Text content 2",
          "default": "<p>Your paragraph text goes here.</p>"
        },
        {
          "type": "color",
          "id": "text_color_2",
          "label": "Text color 2",
          "default": "#666666"
        },
        {
          "type": "range",
          "id": "text_size_2",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Font size 2",
          "default": 16
        },
        {
          "type": "select",
          "id": "text_align_2",
          "label": "Text alignment 2",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "left"
        },
        {
          "type": "header",
          "content": "Text Block 3"
        },
        {
          "type": "richtext",
          "id": "text_content_3",
          "label": "Text content 3",
          "default": "<p>Additional text or call-to-action.</p>"
        },
        {
          "type": "color",
          "id": "text_color_3",
          "label": "Text color 3",
          "default": "#999999"
        },
        {
          "type": "range",
          "id": "text_size_3",
          "min": 10,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Font size 3",
          "default": 14
        },
        {
          "type": "select",
          "id": "text_align_3",
          "label": "Text alignment 3",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "left"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "content_width_type",
          "label": "Content width",
          "options": [
            { "value": "full", "label": "Full width" },
            { "value": "fixed", "label": "Fixed pixels" },
            { "value": "relative", "label": "Percentage" }
          ],
          "default": "full"
        },
        {
          "type": "range",
          "id": "content_width_fixed",
          "min": 600,
          "max": 1400,
          "step": 50,
          "unit": "px",
          "label": "Fixed width",
          "default": 1200
        },
        {
          "type": "range",
          "id": "content_width_percent",
          "min": 50,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Width percentage",
          "default": 80
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "content_padding_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding top",
          "default": 20
        },
        {
          "type": "range",
          "id": "content_padding_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding right",
          "default": 20
        },
        {
          "type": "range",
          "id": "content_padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        },
        {
          "type": "range",
          "id": "content_padding_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding left",
          "default": 20
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Content Slider G",
      "blocks": [
        {
          "type": "image_slide"
        },
        {
          "type": "video_slide"
        },
        {
          "type": "mixed_content_slide"
        }
      ]
    }
  ]
}
{% endschema %}

