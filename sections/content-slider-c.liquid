{% comment %}
  Section: Content Slider (Rewritten)
  - Modern implementation with proper responsive design
  - Supports image, video, and mixed content slides
  - Full theme editor integration with comprehensive settings
{% endcomment %}

{%- liquid
  assign section_height_desktop = section.settings.section_height_desktop | default: 600
  assign section_height_mobile = section.settings.section_height_mobile | default: 300
  assign section_width = section.settings.section_width | default: 'container'
  assign slide_count = section.blocks.size
-%}

<style>
  /* Section Container Styles */
  .content-slider-section-{{ section.id }} {
    position: relative;
    width: 100%;
    height: auto;
    min-height: {{ section_height_mobile }}px;
    overflow: visible;
    {%- if section.settings.section_background_type == 'color' and section.settings.section_background_color != blank -%}
      background-color: {{ section.settings.section_background_color }};
    {%- elsif section.settings.section_background_type == 'image' and section.settings.section_background_image != blank -%}
      background-image: url('{{ section.settings.section_background_image | image_url: width: 1920 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    {%- endif -%}
  }

  @media (min-width: 768px) {
    .content-slider-section-{{ section.id }} {
      height: {{ section_height_desktop }}px;
      min-height: auto;
      overflow: hidden;
    }
  }

  /* Width Container Classes */
  .content-slider-section-{{ section.id }} .width-container {
    position: relative;
    z-index: 1;
    width: 100%;
    height: 100%;
  }

  .content-slider-section-{{ section.id }} .width-container.full-width {
    max-width: none;
  }

  .content-slider-section-{{ section.id }} .width-container.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .content-slider-section-{{ section.id }} .width-container.container-wide {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  /* Slick Slider Container */
  .content-slider-{{ section.id }} {
    width: 100%;
    height: {{ section_height_mobile }}px;
    position: relative;
  }

  @media (min-width: 768px) {
    .content-slider-{{ section.id }} {
      height: {{ section_height_desktop }}px;
    }
  }

  @media (max-width: 767px) {
    .content-slider-{{ section.id }},
    .content-slider-{{ section.id }} .slide-item {
      height: {{ section_height_mobile }}px !important;
      min-height: {{ section_height_mobile }}px !important;
      max-height: {{ section_height_mobile }}px !important;
    }
  }

  /* Individual Slide Styles */
  .content-slider-{{ section.id }} .slide-item {
    width: 100%;
    height: {{ section_height_mobile }}px;
    position: relative;
    outline: none;
  }

  @media (min-width: 768px) {
    .content-slider-{{ section.id }} .slide-item {
      height: {{ section_height_desktop }}px;
    }
  }

  /* Mobile: Ensure content can expand */
  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .slide-item .slide-content {
      height: 100%;
      padding: 0 !important;
      box-sizing: border-box;
    }

    .content-slider-{{ section.id }} .slide-item .content-inner {
      height: 100%;
      padding: 0 !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide {
      padding: 0 !important;
      height: 100%;
    }
  }


  /* Slide Content */
  .content-slider-{{ section.id }} .slide-content {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Content Width Options */
  .content-slider-{{ section.id }} .content-inner {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .content-slider-{{ section.id }} .content-inner.full-width {
    max-width: none;
  }

  .content-slider-{{ section.id }} .content-inner.fixed-width {
    max-width: var(--content-max-width);
  }

  .content-slider-{{ section.id }} .content-inner.relative-width {
    width: var(--content-width-percent);
  }

  /* Optional Title Styles */
  .content-slider-{{ section.id }} .slide-title {
    position: absolute;
    top: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    background: rgba(0, 0, 0, 0.7);
    padding: 1rem 2rem;
    border-radius: 4px;
    text-align: center;
    max-width: 90%;
    box-sizing: border-box;
    /* Typography styles will be added inline per block */
  }

  /* Image Slide Styles */
  .content-slider-{{ section.id }} .image-slide-content {
    width: 100%;
    height: 100%;
  }

  .content-slider-{{ section.id }} .image-slide-content img,
  .content-slider-{{ section.id }} .image-slide-content svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .content-slider-{{ section.id }} .image-slide-content a {
    display: block;
    width: 100%;
    height: 100%;
  }

  /* Video Slide Styles */
  .content-slider-{{ section.id }} .video-slide-content {
    width: 100%;
    height: 100%;
    position: relative;
    cursor: pointer;
  }

  .content-slider-{{ section.id }} .video-cover {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .content-slider-{{ section.id }} .video-cover img,
  .content-slider-{{ section.id }} .video-cover svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .content-slider-{{ section.id }} .video-play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 2;
    border: none;
    cursor: pointer;
  }

  .content-slider-{{ section.id }} .video-play-button:hover {
    transform: translate(-50%, -50%) scale(1.1);
    background: rgba(255, 255, 255, 1);
  }

  .content-slider-{{ section.id }} .video-play-button svg {
    width: 32px;
    height: 32px;
    fill: #333;
    margin-left: 4px;
  }

  .content-slider-{{ section.id }} .video-iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    z-index: 3;
  }

  .content-slider-{{ section.id }} .video-slide-content.playing .video-cover {
    opacity: 0;
  }

  .content-slider-{{ section.id }} .video-slide-content.playing .video-play-button {
    display: none;
  }

  /* Mixed Content Slide Styles */
  .content-slider-{{ section.id }} .mixed-content-slide {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    border: none;
    outline: none;
    box-shadow: none;
    background: transparent;
    gap: var(--gap, 20px);
  }

  .content-slider-{{ section.id }} .mixed-content-slide > * {
    border: none;
    outline: none;
    box-shadow: none;
    background: transparent;
    margin: 0;
  }

  @media (min-width: 768px) {
    .content-slider-{{ section.id }} .mixed-content-slide {
      flex-direction: row;
      align-items: stretch;
      gap: var(--gap, 20px);
    }

    .content-slider-{{ section.id }} .mixed-content-slide.layout-image-right {
      flex-direction: row-reverse;
    }
  }

  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .mixed-content-slide {
      gap: var(--gap, 20px);
    }
  }

  .content-slider-{{ section.id }} .mixed-content-image {
    position: relative;
    flex: 0 0 auto;
    display: flex;
    align-items: var(--image-valign, center);
  }

  .content-slider-{{ section.id }} .mixed-content-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: var(--text-valign, center);
    position: relative;
    background: transparent;
  }

  .content-slider-{{ section.id }} .mixed-content-image img {
    width: 100%;
    height: auto;
    max-width: 100%;
    display: block;
    object-fit: contain;
  }

  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .mixed-content-image picture {
      width: 100% !important;
      height: 100% !important;
      display: block !important;
    }

    .content-slider-{{ section.id }} .mixed-content-image img {
      width: 100% !important;
      height: 100% !important;
      min-width: 100% !important;
      min-height: calc({{ section_height_mobile }}px * 0.4) !important;
      max-height: calc({{ section_height_mobile }}px * 0.4) !important;
      object-fit: cover !important;
      object-position: top center !important;
      display: block !important;
    }
  }

  .content-slider-{{ section.id }} .mixed-content-text {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: var(--text-valign, center);
    position: relative;
  }

  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .mixed-content-slide {
      display: block !important;
    }

    .content-slider-{{ section.id }} .mixed-content-image {
      width: 100% !important;
      max-width: none !important;
      height: calc({{ section_height_mobile }}px * 0.4) !important;
      min-height: calc({{ section_height_mobile }}px * 0.4) !important;
      max-height: calc({{ section_height_mobile }}px * 0.4) !important;
      margin: 0 !important;
      padding: 0 !important;
      flex: none !important;
      display: block !important;
      overflow: hidden !important;
    }

    .content-slider-{{ section.id }} .mixed-content-text {
      width: 100% !important;
      padding: 20px 20px 20px 20px;
      justify-content: flex-start !important;
      flex: none !important;
      display: block !important;
    }

    .content-slider-{{ section.id }} .mixed-content-text-inner {
      padding: 0 !important;
      text-align: center;
    }

    /* Keep lists left-aligned on mobile */
    .content-slider-{{ section.id }} .mixed-content-text-inner ul,
    .content-slider-{{ section.id }} .mixed-content-text-inner ol {
      text-align: left;
      display: inline-block;
      margin: 0 auto;
    }
  }

  .content-slider-{{ section.id }} .mixed-content-text-inner {
    width: 100%;
    box-sizing: border-box;
  }

  /* Text Content Styling */
  .content-slider-{{ section.id }} .text-content {
    margin-bottom: 2rem;
  }

  .content-slider-{{ section.id }} .text-content:last-child {
    margin-bottom: 0;
  }

  .content-slider-{{ section.id }} .text-content h1,
  .content-slider-{{ section.id }} .text-content h2,
  .content-slider-{{ section.id }} .text-content h3 {
    margin: 0 0 1rem 0;
    line-height: 1.2;
  }

  .content-slider-{{ section.id }} .text-content p {
    margin: 0 0 1rem 0;
    line-height: 1.5;
  }

  .content-slider-{{ section.id }} .text-content p:last-child {
    margin-bottom: 0;
  }

  /* Mobile Text Scaling for Mixed Content Slides */
  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .mixed-content-slide .text-content-1 {
      font-size: clamp(16px, 4vw, calc(var(--text-size-1, 24px) * 0.6)) !important;
      line-height: 1.1 !important;
      margin-bottom: 0.5rem !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide .text-content-2 {
      font-size: clamp(14px, 3.5vw, calc(var(--text-size-2, 16px) * 0.75)) !important;
      line-height: 1.3 !important;
      margin-bottom: 0.5rem !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide .text-content-3 {
      font-size: clamp(12px, 3vw, calc(var(--text-size-3, 14px) * 0.8)) !important;
      line-height: 1.3 !important;
      margin-bottom: 0.5rem !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide .text-content {
      text-align: center !important;
      margin-bottom: 0.5rem !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide .text-content:last-child {
      margin-bottom: 0 !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide .text-content h1,
    .content-slider-{{ section.id }} .mixed-content-slide .text-content h2,
    .content-slider-{{ section.id }} .mixed-content-slide .text-content h3 {
      margin-bottom: 0.3rem !important;
    }

    .content-slider-{{ section.id }} .mixed-content-slide .text-content p {
      margin-bottom: 0.3rem !important;
    }

    .content-slider-{{ section.id }} .mixed-content-text {
      padding: 15px 15px 15px 15px !important;
      overflow-y: auto;
    }
  }


  /* Hide all navigation arrows - NEVER SHOW */
  .content-slider-{{ section.id }} .slick-arrow,
  .content-slider-{{ section.id }} .slick-prev,
  .content-slider-{{ section.id }} .slick-next {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  /* Hide arrows when data-show-arrows is false */
  .content-slider-{{ section.id }}[data-show-arrows="false"] .slick-arrow.slick-prev,
  .content-slider-{{ section.id }}[data-show-arrows="false"] .slick-arrow.slick-next {
    display: none !important;
  }

  /* Slick Dots */
  .content-slider-{{ section.id }} .slick-dots {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
    display: flex !important;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 1rem;
  }

  .content-slider-{{ section.id }} .slick-dots li {
    margin: 0;
    padding: 0;
  }

  .content-slider-{{ section.id }} .slick-dots button {
    width: 12px;
    height: 12px;
    border: none;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    text-indent: -9999px;
    transition: all 0.3s ease;
  }

  .content-slider-{{ section.id }} .slick-dots .slick-active button {
    background: rgba(255, 255, 255, 1);
    transform: scale(1.2);
  }

  /* Hide dots when data-show-dots is false */
  .content-slider-{{ section.id }}[data-show-dots="false"] .slick-dots {
    display: none !important;
  }

  /* Mobile Navigation Adjustments */
  @media (max-width: 767px) {
    .content-slider-{{ section.id }} .slick-arrow {
      width: 40px;
      height: 40px;
    }

    .content-slider-{{ section.id }} .slick-prev {
      left: 1rem;
    }

    .content-slider-{{ section.id }} .slick-next {
      right: 1rem;
    }

    .content-slider-{{ section.id }} .slick-dots {
      bottom: 1rem;
    }
  }


  /* Single Block Display (No Slider) */
  .content-slider-{{ section.id }}:not([data-init-content-slider]) .slide-item {
    display: block !important;
    width: 100% !important;
    height: 100% !important;
  }

  /* Loading State */
  .content-slider-{{ section.id }}.loading {
    opacity: 0.5;
  }

  /* Error State */
  .content-slider-{{ section.id }} .error-message {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    z-index: 20;
  }
</style>

<section class="content-slider-section-{{ section.id }}">
  <!-- Width Container -->
  <div class="width-container {{ section_width }}">

    <!-- Main Slider Container -->
    <div
      class="content-slider-{{ section.id }}"
      id="content-slider-{{ section.id }}"
      data-show-dots="{{ section.settings.show_dots | default: true }}"
      {% if section.blocks.size > 1 %}data-init-content-slider data-autoplay="{{ section.settings.autoplay | default: false }}" data-autoplay-speed="{{ section.settings.autoplay_speed | default: 5000 }}" data-fade="{{ section.settings.fade_transition | default: false }}" data-infinite="{{ section.settings.infinite_scroll | default: true }}"{% endif %}
    >

      {%- for block in section.blocks -%}
        {%- liquid
          assign content_width_class = 'full-width'
          assign content_style = ''
          if block.settings.content_width_type == 'fixed'
            assign content_width_class = 'fixed-width'
            assign content_style = '--content-max-width: ' | append: block.settings.content_width_fixed | append: 'px;'
          elsif block.settings.content_width_type == 'relative'
            assign content_width_class = 'relative-width'
            assign content_style = '--content-width-percent: ' | append: block.settings.content_width_percent | append: '%;'
          endif

          assign padding_style = 'padding: ' | append: block.settings.content_padding_top | append: 'px ' | append: block.settings.content_padding_right | append: 'px ' | append: block.settings.content_padding_bottom | append: 'px ' | append: block.settings.content_padding_left | append: 'px;'
        -%}

        <div class="slide-item slide-block-{{ block.id }}" id="block-{{ block.id }}" data-index="{{ forloop.index }}" {{ block.shopify_attributes }}>
          <!-- Optional Title -->
          {%- if block.settings.title != blank -%}
            {%- liquid
              assign title_font = block.settings.title_font
              assign has_title_shadow = false
              if block.settings.title_shadow_x != 0 or block.settings.title_shadow_y != 0 or block.settings.title_shadow_blur != 0
                assign has_title_shadow = true
              endif
            -%}
            <div
              class="slide-title"
              style="
                font-family: {{ title_font.family }}, {{ title_font.fallback_families }};
                font-size: {{ block.settings.title_size | default: 28 }}px;
                color: {{ block.settings.title_color | default: '#ffffff' }};
                line-height: {{ block.settings.title_line_height | default: 1.2 }};
                letter-spacing: {{ block.settings.title_letter_spacing | default: 0 }}px;
                text-transform: {{ block.settings.title_transform | default: 'none' }};
                text-decoration: {{ block.settings.title_decoration | default: 'none' }};
                margin: {{ block.settings.title_margin_top | default: 0 }}px {{ block.settings.title_margin_right | default: 0 }}px {{ block.settings.title_margin_bottom | default: 0 }}px {{ block.settings.title_margin_left | default: 0 }}px;
                {% if has_title_shadow %}text-shadow: {{ block.settings.title_shadow_x }}px {{ block.settings.title_shadow_y }}px {{ block.settings.title_shadow_blur }}px {{ block.settings.title_shadow_color }};{% endif %}
              "
            >
              {{ block.settings.title }}
            </div>
          {%- endif -%}

          <!-- Slide Content -->
          <div class="slide-content">
            <div class="content-inner {{ content_width_class }}" style="{{ content_style }} {{ padding_style }}">

              {%- case block.type -%}

                {%- when 'image_slide' -%}
                  <div class="image-slide-content">
                    {%- if block.settings.link != blank -%}<a href="{{ block.settings.link }}">{%- endif -%}

                    {%- if block.settings.image != blank -%}
                      {%- if block.settings.image_mobile != blank -%}
                        <picture>
                          <source media="(max-width: 767px)" srcset="{{ block.settings.image_mobile | image_url: width: 800 }}">
                          <img
                            src="{{ block.settings.image | image_url: width: 1920 }}"
                            alt="{{ block.settings.image.alt | escape }}"
                            loading="lazy"
                            width="1920"
                            height="{{ 1920 | divided_by: block.settings.image.aspect_ratio | round }}"
                          >
                        </picture>
                      {%- else -%}
                        <img
                          src="{{ block.settings.image | image_url: width: 1920 }}"
                          alt="{{ block.settings.image.alt | escape }}"
                          loading="lazy"
                          width="1920"
                          height="{{ 1920 | divided_by: block.settings.image.aspect_ratio | round }}"
                        >
                      {%- endif -%}
                    {%- else -%}
                      <img src="{{ 'placeholder.svg' | asset_url }}" class="placeholder-svg" alt="Product Placeholder" loading="lazy" />
                    {%- endif -%}

                    {%- if block.settings.link != blank -%}</a>{%- endif -%}
                  </div>

                {%- when 'video_slide' -%}
                  <div
                    class="video-slide-content"
                    data-video-source="{{ block.settings.video_source }}"
                    data-video-id="{% if block.settings.video_source == 'youtube' %}{{ block.settings.video_url.id }}{% elsif block.settings.video_source == 'vimeo' %}{{ block.settings.video_url.id }}{% else %}{{ block.settings.hosted_video_url }}{% endif %}"
                  >
                    <div class="video-cover">
                      {%- if block.settings.cover_image != blank -%}
                        <img
                          src="{{ block.settings.cover_image | image_url: width: 1920 }}"
                          alt="{{ block.settings.cover_image.alt | escape }}"
                          loading="lazy"
                          width="1920"
                          height="{{ 1920 | divided_by: block.settings.cover_image.aspect_ratio | round }}"
                        >
                      {%- else -%}
                        <img src="{{ 'placeholder.svg' | asset_url }}" class="placeholder-svg" alt="Product Placeholder" loading="lazy" />
                      {%- endif -%}
                    </div>

                    <button
                      class="video-play-button"
                      type="button"
                      aria-label="Play video"
                      data-video-trigger
                    >
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                        <path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/>
                      </svg>
                    </button>
                  </div>

                {%- when 'mixed_content_slide' -%}
                  {%- liquid
                    assign layout_class = 'layout-image-left'
                    if block.settings.layout == 'image_right'
                      assign layout_class = 'layout-image-right'
                    endif
                
                    assign image_width = block.settings.image_width | default: 400
                    assign image_margin = block.settings.image_margin | default: 20
                    assign text_padding = block.settings.text_padding | default: 40
                
                    assign image_valign = block.settings.image_vertical_align | default: 'center'
                    assign text_valign = block.settings.text_vertical_align | default: 'center'
                
                    assign image_style = 'flex: 0 0 ' | append: image_width | append: 'px; max-width: ' | append: image_width | append: 'px; --image-valign: ' | append: image_valign | append: ';'
                    assign text_style = 'padding: ' | append: text_padding | append: 'px; --text-valign: ' | append: text_valign | append: ';'
                    assign gap_style = '--gap: ' | append: image_margin | append: 'px;'
                  -%}

                  <div class="mixed-content-slide {{ layout_class }}" style="{{ gap_style }}">
                    <!-- Image Column -->
                    <div class="mixed-content-image" style="{{ image_style }}">
                      {%- if block.settings.image != blank -%}
                        {%- if block.settings.image_mobile != blank -%}
                          <picture>
                            <source media="(max-width: 767px)" srcset="{{ block.settings.image_mobile | image_url: width: 600 }}">
                            <img
                              src="{{ block.settings.image | image_url: width: 800 }}"
                              alt="{{ block.settings.image.alt | escape }}"
                              loading="lazy"
                              width="800"
                              height="{{ 800 | divided_by: block.settings.image.aspect_ratio | round }}"
                            >
                          </picture>
                        {%- else -%}
                          <img
                            src="{{ block.settings.image | image_url: width: 800 }}"
                            alt="{{ block.settings.image.alt | escape }}"
                            loading="lazy"
                            width="800"
                            height="{{ 800 | divided_by: block.settings.image.aspect_ratio | round }}"
                          >
                        {%- endif -%}
                      {%- else -%}
                        <img src="{{ 'placeholder.svg' | asset_url }}" class="placeholder-svg" alt="Product Placeholder" loading="lazy" />
                      {%- endif -%}
                    </div>

                    <!-- Text Column -->
                    <div class="mixed-content-text">
                      <div class="mixed-content-text-inner" style="{{ text_style }}">

                        {%- if block.settings.text_content_1 != blank -%}
                          {%- liquid
                            assign text_font_1 = block.settings.text_font_1
                            assign has_text_shadow_1 = false
                            if block.settings.text_shadow_x_1 != 0 or block.settings.text_shadow_y_1 != 0 or block.settings.text_shadow_blur_1 != 0
                              assign has_text_shadow_1 = true
                            endif
                          -%}
                          <div
                            class="text-content text-content-1"
                            style="
                              font-family: {{ text_font_1.family }}, {{ text_font_1.fallback_families }};
                              color: {{ block.settings.text_color_1 | default: '#333' }};
                              font-size: {{ block.settings.text_size_1 | default: 24 }}px;
                              --text-size-1: {{ block.settings.text_size_1 | default: 24 }}px;
                              line-height: {{ block.settings.text_line_height_1 | default: 1.5 }};
                              letter-spacing: {{ block.settings.text_letter_spacing_1 | default: 0 }}px;
                              text-align: {{ block.settings.text_align_1 | default: 'left' }};
                              text-transform: {{ block.settings.text_transform_1 | default: 'none' }};
                              text-decoration: {{ block.settings.text_decoration_1 | default: 'none' }};
                              margin: {{ block.settings.text_margin_top_1 | default: 0 }}px {{ block.settings.text_margin_right_1 | default: 0 }}px {{ block.settings.text_margin_bottom_1 | default: 20 }}px {{ block.settings.text_margin_left_1 | default: 0 }}px;
                              {% if has_text_shadow_1 %}text-shadow: {{ block.settings.text_shadow_x_1 }}px {{ block.settings.text_shadow_y_1 }}px {{ block.settings.text_shadow_blur_1 }}px {{ block.settings.text_shadow_color_1 }};{% endif %}
                            "
                          >
                            {{ block.settings.text_content_1 }}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.text_content_2 != blank -%}
                          {%- liquid
                            assign text_font_2 = block.settings.text_font_2
                            assign has_text_shadow_2 = false
                            if block.settings.text_shadow_x_2 != 0 or block.settings.text_shadow_y_2 != 0 or block.settings.text_shadow_blur_2 != 0
                              assign has_text_shadow_2 = true
                            endif
                          -%}
                          <div
                            class="text-content text-content-2"
                            style="
                              font-family: {{ text_font_2.family }}, {{ text_font_2.fallback_families }};
                              color: {{ block.settings.text_color_2 | default: '#666' }};
                              font-size: {{ block.settings.text_size_2 | default: 16 }}px;
                              --text-size-2: {{ block.settings.text_size_2 | default: 16 }}px;
                              line-height: {{ block.settings.text_line_height_2 | default: 1.5 }};
                              letter-spacing: {{ block.settings.text_letter_spacing_2 | default: 0 }}px;
                              text-align: {{ block.settings.text_align_2 | default: 'left' }};
                              text-transform: {{ block.settings.text_transform_2 | default: 'none' }};
                              text-decoration: {{ block.settings.text_decoration_2 | default: 'none' }};
                              margin: {{ block.settings.text_margin_top_2 | default: 0 }}px {{ block.settings.text_margin_right_2 | default: 0 }}px {{ block.settings.text_margin_bottom_2 | default: 20 }}px {{ block.settings.text_margin_left_2 | default: 0 }}px;
                              {% if has_text_shadow_2 %}text-shadow: {{ block.settings.text_shadow_x_2 }}px {{ block.settings.text_shadow_y_2 }}px {{ block.settings.text_shadow_blur_2 }}px {{ block.settings.text_shadow_color_2 }};{% endif %}
                            "
                          >
                            {{ block.settings.text_content_2 }}
                          </div>
                        {%- endif -%}

                        {%- if block.settings.text_content_3 != blank -%}
                          {%- liquid
                            assign text_font_3 = block.settings.text_font_3
                            assign has_text_shadow_3 = false
                            if block.settings.text_shadow_x_3 != 0 or block.settings.text_shadow_y_3 != 0 or block.settings.text_shadow_blur_3 != 0
                              assign has_text_shadow_3 = true
                            endif
                          -%}
                          <div
                            class="text-content text-content-3"
                            style="
                              font-family: {{ text_font_3.family }}, {{ text_font_3.fallback_families }};
                              color: {{ block.settings.text_color_3 | default: '#999' }};
                              font-size: {{ block.settings.text_size_3 | default: 14 }}px;
                              --text-size-3: {{ block.settings.text_size_3 | default: 14 }}px;
                              line-height: {{ block.settings.text_line_height_3 | default: 1.5 }};
                              letter-spacing: {{ block.settings.text_letter_spacing_3 | default: 0 }}px;
                              text-align: {{ block.settings.text_align_3 | default: 'left' }};
                              text-transform: {{ block.settings.text_transform_3 | default: 'none' }};
                              text-decoration: {{ block.settings.text_decoration_3 | default: 'none' }};
                              margin: {{ block.settings.text_margin_top_3 | default: 0 }}px {{ block.settings.text_margin_right_3 | default: 0 }}px {{ block.settings.text_margin_bottom_3 | default: 0 }}px {{ block.settings.text_margin_left_3 | default: 0 }}px;
                              {% if has_text_shadow_3 %}text-shadow: {{ block.settings.text_shadow_x_3 }}px {{ block.settings.text_shadow_y_3 }}px {{ block.settings.text_shadow_blur_3 }}px {{ block.settings.text_shadow_color_3 }};{% endif %}
                            "
                          >
                            {{ block.settings.text_content_3 }}
                          </div>
                        {%- endif -%}

                      </div>
                    </div>
                  </div>

              {%- endcase -%}

            </div>
          </div>
        </div>

      {%- endfor -%}

    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Only initialize slider if data-init-content-slider exists (multiple blocks)
  const sliderElements = document.querySelectorAll('[data-init-content-slider]');

  if (!sliderElements.length || !window.jQuery) {
    // No sliders to initialize or jQuery missing
    return;
  }

  const $ = window.jQuery;

  // Check if Slick is available
  if (typeof $.fn.slick !== 'function') {
    sliderElements.forEach(function(sliderElement) {
      $(sliderElement).removeClass('loading').append('<div class="error-message">Slider library not loaded. Please refresh the page.</div>');
    });
    return;
  }

  const isDesignMode = window.Shopify && window.Shopify.designMode;

  // Check if Slick is available
  if (typeof $.fn.slick !== 'function') {
    sliderElements.forEach(function(sliderElement) {
      $(sliderElement).removeClass('loading').append('<div class="error-message">Slider library not loaded. Please refresh the page.</div>');
    });
    return;
  }

  sliderElements.forEach(function(sliderElement) {
    const $slider = $(sliderElement);

    // Get settings from data attributes
    const autoplay = isDesignMode ? false : ($slider.data('autoplay') === true || $slider.data('autoplay') === 'true');
    const autoplaySpeed = parseInt($slider.data('autoplay-speed')) || 5000;
    const showArrows = false; // Always disable arrows
    const showDots = $slider.data('show-dots') === true || $slider.data('show-dots') === 'true';
    const fade = $slider.data('fade') === true || $slider.data('fade') === 'true';
    const infinite = $slider.data('infinite') === true || $slider.data('infinite') === 'true';

    // Initialize Slick slider only if not already initialized
  try {
    $slider.addClass('loading');

    // Disable adaptiveHeight on mobile
    const isMobile = window.innerWidth <= 767;

    $slider.slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: autoplay,
      autoplaySpeed: autoplaySpeed,
      arrows: false,
      dots: showDots,
      fade: fade,
      infinite: infinite,
      speed: 500,
      cssEase: 'ease-in-out',
      adaptiveHeight: !isMobile,
      pauseOnHover: true,
      pauseOnFocus: true,
      accessibility: true,
      focusOnSelect: false,
      lazyLoad: 'ondemand',
      respondTo: 'window'
    });

    // Remove loading state after initialization
    $slider.on('init', function() {
      $slider.removeClass('loading');

      if (isDesignMode) {
        // Use MutationObserver to detect when a slide gets selected in the editor
        $slider.find('.slide-item').each(function() {
          const slideElement = this;
          const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
              if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                const target = mutation.target;
                if (target.classList.contains('shopify-editor-selected') || target.classList.contains('selected')) {
                  const index = $(target).data('index');
                  if ($slider.slick('slickCurrentSlide') !== index) {
                    $slider.slick('slickGoTo', index);
                  }
                }
              }
            });
          });

          observer.observe(slideElement, {
            attributes: true,
            attributeFilter: ['class']
          });
        });
      }
    });

    // Fallback: remove loading after 3 seconds if init doesn't fire
    setTimeout(function() {
      $slider.removeClass('loading');
    }, 3000);

  } catch (error) {
    console.error('Content Slider: Failed to initialize Slick slider', error);
    $slider.removeClass('loading');

    // Show error message
    $slider.append('<div class="error-message">Slider failed to load. Please refresh the page.</div>');
  }

  // Video functionality
  function initVideoHandlers() {
    $slider.on('click', '[data-video-trigger]', function(e) {
      e.preventDefault();

      const $button = $(this);
      const $videoSlide = $button.closest('.video-slide-content');
      const videoSource = $videoSlide.data('video-source');
      const videoId = $videoSlide.data('video-id');

      if (!videoSource || !videoId || $videoSlide.hasClass('playing')) {
        return;
      }

      let embedUrl = '';
      let videoElement = '';

      try {
        // Pause slider autoplay when video starts
        if (autoplay) {
          $slider.slick('slickPause');
        }

        // Generate video embed based on source
        switch (videoSource) {
          case 'youtube':
            embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&rel=0&modestbranding=1`;
            videoElement = `<iframe class="video-iframe" src="${embedUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            break;

          case 'vimeo':
            embedUrl = `https://player.vimeo.com/video/${videoId}?autoplay=1&muted=1&background=1`;
            videoElement = `<iframe class="video-iframe" src="${embedUrl}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
            break;

          case 'mp4':
            videoElement = `<video class="video-iframe" controls autoplay muted playsinline><source src="${videoId}" type="video/mp4">Your browser does not support the video tag.</video>`;
            break;

          default:
            console.warn('Content Slider: Unknown video source', videoSource);
            return;
        }

        // Add video element and mark as playing
        $videoSlide.addClass('playing').append(videoElement);

        // Add error handling for iframes
        const $iframe = $videoSlide.find('.video-iframe');
        $iframe.on('load error', function(e) {
          if (e.type === 'error') {
            console.error('Content Slider: Video failed to load', embedUrl);
            $videoSlide.removeClass('playing').find('.video-iframe').remove();
            if (autoplay) {
              $slider.slick('slickPlay');
            }
          }
        });

      } catch (error) {
        console.error('Content Slider: Video initialization error', error);
        $videoSlide.removeClass('playing');

        // Resume autoplay on error
        if (autoplay) {
          $slider.slick('slickPlay');
        }
      }
    });
  }

  // Clean up videos when slide changes
  function initSlideChangeHandlers() {
    $slider.on('beforeChange', function(event, slick, currentSlide, nextSlide) {
      // Clean up any playing videos
      const $currentSlide = $(slick.$slides[currentSlide]);
      const $videoSlide = $currentSlide.find('.video-slide-content.playing');

      if ($videoSlide.length) {
        $videoSlide.removeClass('playing').find('.video-iframe').remove();

        // Resume autoplay when video stops
        if (autoplay) {
          setTimeout(() => {
            $slider.slick('slickPlay');
          }, 100);
        }
      }
    });

    // Handle slide focus for accessibility
    $slider.on('afterChange', function(event, slick, currentSlide) {
      const $currentSlide = $(slick.$slides[currentSlide]);
      $currentSlide.attr('aria-hidden', 'false').siblings().attr('aria-hidden', 'true');
    });
  }

  // Initialize all handlers
  initVideoHandlers();
  initSlideChangeHandlers();

  // Handle window resize
  let resizeTimer;
  $(window).on('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
      if ($slider.hasClass('slick-initialized')) {
        $slider.slick('setPosition');
      }
    }, 250);
  });

    // Cleanup on page unload
    $(window).on('beforeunload', function() {
      if ($slider.hasClass('slick-initialized')) {
        $slider.slick('unslick');
      }
    });

  }); // End forEach loop
});
</script>

{% schema %}
{
  "name": "Content Slider C",
  "tag": "section",
  "class": "section-content-slider",
  "max_blocks": 8,
  "settings": [
    {
      "type": "header",
      "content": "Section Layout"
    },
    {
      "type": "range",
      "id": "section_height_desktop",
      "min": 300,
      "max": 1000,
      "step": 25,
      "unit": "px",
      "label": "Desktop height",
      "default": 600
    },
    {
      "type": "range",
      "id": "section_height_mobile",
      "min": 200,
      "max": 700,
      "step": 25,
      "unit": "px",
      "label": "Mobile height",
      "default": 300
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        { "value": "full-width", "label": "Full width" },
        { "value": "container", "label": "Container (1200px)" },
        { "value": "container-wide", "label": "Wide container (1400px)" }
      ],
      "default": "full-width"
    },
    {
      "type": "header",
      "content": "Section Background"
    },
    {
      "type": "select",
      "id": "section_background_type",
      "label": "Background type",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "color", "label": "Color" },
        { "value": "image", "label": "Image" }
      ],
      "default": "none"
    },
    {
      "type": "color",
      "id": "section_background_color",
      "label": "Background color"
    },
    {
      "type": "image_picker",
      "id": "section_background_image",
      "label": "Background image"
    },
    {
      "type": "header",
      "content": "Slider Controls"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay slides",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 2000,
      "max": 9500,
      "step": 500,
      "unit": "ms",
      "label": "Autoplay speed",
      "default": 5000
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "label": "Show pagination dots",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "fade_transition",
      "label": "Use fade transition",
      "default": false,
      "info": "Uses fade instead of slide transition"
    },
    {
      "type": "checkbox",
      "id": "infinite_scroll",
      "label": "Infinite scrolling",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "image_slide",
      "name": "Image Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (optional)",
          "info": "Appears as overlay on slide"
        },
        {
          "type": "header",
          "content": "Title Typography"
        },
        {
          "type": "font_picker",
          "id": "title_font",
          "label": "Title Font Family",
          "default": "assistant_n4"
        },
        {
          "type": "range",
          "id": "title_size",
          "min": 12,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Title Font Size",
          "default": 28
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Title Color",
          "default": "#ffffff"
        },
        {
          "type": "range",
          "id": "title_line_height",
          "min": 0.8,
          "max": 2.5,
          "step": 0.1,
          "label": "Title Line Height",
          "default": 1.2
        },
        {
          "type": "range",
          "id": "title_letter_spacing",
          "min": -5,
          "max": 10,
          "step": 0.5,
          "unit": "px",
          "label": "Title Letter Spacing",
          "default": 0
        },
        {
          "type": "select",
          "id": "title_transform",
          "label": "Title Text Transform",
          "options": [
            {"value": "none", "label": "Normal"},
            {"value": "uppercase", "label": "Uppercase"},
            {"value": "lowercase", "label": "Lowercase"},
            {"value": "capitalize", "label": "Capitalize"}
          ],
          "default": "none"
        },
        {
          "type": "select",
          "id": "title_decoration",
          "label": "Title Text Decoration",
          "options": [
            {"value": "none", "label": "None"},
            {"value": "underline", "label": "Underline"},
            {"value": "line-through", "label": "Strikethrough"}
          ],
          "default": "none"
        },
        {
          "type": "header",
          "content": "Title Shadow"
        },
        {
          "type": "range",
          "id": "title_shadow_x",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow X Offset",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_shadow_y",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow Y Offset",
          "default": 2
        },
        {
          "type": "range",
          "id": "title_shadow_blur",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Shadow Blur",
          "default": 4
        },
        {
          "type": "color",
          "id": "title_shadow_color",
          "label": "Shadow Color",
          "default": "#000000"
        },
        {
          "type": "header",
          "content": "Title Spacing"
        },
        {
          "type": "range",
          "id": "title_margin_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Top",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Right",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Left",
          "default": 0
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Desktop image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Mobile image (optional)",
          "info": "Different image for mobile screens"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link URL",
          "info": "Makes entire slide clickable"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "content_width_type",
          "label": "Content width",
          "options": [
            { "value": "full", "label": "Full width" },
            { "value": "fixed", "label": "Fixed pixels" },
            { "value": "relative", "label": "Percentage" }
          ],
          "default": "full"
        },
        {
          "type": "range",
          "id": "content_width_fixed",
          "min": 600,
          "max": 1400,
          "step": 50,
          "unit": "px",
          "label": "Fixed width",
          "default": 1200
        },
        {
          "type": "range",
          "id": "content_width_percent",
          "min": 50,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Width percentage",
          "default": 80
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "content_padding_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding top",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding right",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding left",
          "default": 0
        }
      ]
    },
    {
      "type": "video_slide",
      "name": "Video Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (optional)",
          "info": "Appears as overlay on slide"
        },
        {
          "type": "header",
          "content": "Title Typography"
        },
        {
          "type": "font_picker",
          "id": "title_font",
          "label": "Title Font Family",
          "default": "assistant_n4"
        },
        {
          "type": "range",
          "id": "title_size",
          "min": 12,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Title Font Size",
          "default": 28
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Title Color",
          "default": "#ffffff"
        },
        {
          "type": "range",
          "id": "title_line_height",
          "min": 0.8,
          "max": 2.5,
          "step": 0.1,
          "label": "Title Line Height",
          "default": 1.2
        },
        {
          "type": "range",
          "id": "title_letter_spacing",
          "min": -5,
          "max": 10,
          "step": 0.5,
          "unit": "px",
          "label": "Title Letter Spacing",
          "default": 0
        },
        {
          "type": "select",
          "id": "title_transform",
          "label": "Title Text Transform",
          "options": [
            {"value": "none", "label": "Normal"},
            {"value": "uppercase", "label": "Uppercase"},
            {"value": "lowercase", "label": "Lowercase"},
            {"value": "capitalize", "label": "Capitalize"}
          ],
          "default": "none"
        },
        {
          "type": "select",
          "id": "title_decoration",
          "label": "Title Text Decoration",
          "options": [
            {"value": "none", "label": "None"},
            {"value": "underline", "label": "Underline"},
            {"value": "line-through", "label": "Strikethrough"}
          ],
          "default": "none"
        },
        {
          "type": "header",
          "content": "Title Shadow"
        },
        {
          "type": "range",
          "id": "title_shadow_x",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow X Offset",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_shadow_y",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow Y Offset",
          "default": 2
        },
        {
          "type": "range",
          "id": "title_shadow_blur",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Shadow Blur",
          "default": 4
        },
        {
          "type": "color",
          "id": "title_shadow_color",
          "label": "Shadow Color",
          "default": "#000000"
        },
        {
          "type": "header",
          "content": "Title Spacing"
        },
        {
          "type": "range",
          "id": "title_margin_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Top",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Right",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Left",
          "default": 0
        },
        {
          "type": "image_picker",
          "id": "cover_image",
          "label": "Cover image",
          "info": "Shown before video plays"
        },
        {
          "type": "select",
          "id": "video_source",
          "label": "Video source",
          "options": [
            { "value": "youtube", "label": "YouTube" },
            { "value": "vimeo", "label": "Vimeo" },
            { "value": "mp4", "label": "MP4 file" }
          ],
          "default": "youtube"
        },
        {
          "type": "video_url",
          "id": "video_url",
          "label": "YouTube or Vimeo URL",
          "accept": ["youtube", "vimeo"]
        },
        {
          "type": "text",
          "id": "hosted_video_url",
          "label": "MP4 video URL",
          "info": "Direct link to MP4 file"
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "content_width_type",
          "label": "Content width",
          "options": [
            { "value": "full", "label": "Full width" },
            { "value": "fixed", "label": "Fixed pixels" },
            { "value": "relative", "label": "Percentage" }
          ],
          "default": "full"
        },
        {
          "type": "range",
          "id": "content_width_fixed",
          "min": 600,
          "max": 1400,
          "step": 50,
          "unit": "px",
          "label": "Fixed width",
          "default": 1200
        },
        {
          "type": "range",
          "id": "content_width_percent",
          "min": 50,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Width percentage",
          "default": 80
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "content_padding_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding top",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding right",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "content_padding_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding left",
          "default": 0
        }
      ]
    },
    {
      "type": "mixed_content_slide",
      "name": "Mixed Content Slide",
      "settings": [
        {
          "type": "header",
          "content": "Content"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (optional)",
          "info": "Appears as overlay on slide"
        },
        {
          "type": "header",
          "content": "Title Typography"
        },
        {
          "type": "font_picker",
          "id": "title_font",
          "label": "Title Font Family",
          "default": "assistant_n4"
        },
        {
          "type": "range",
          "id": "title_size",
          "min": 12,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Title Font Size",
          "default": 28
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Title Color",
          "default": "#ffffff"
        },
        {
          "type": "range",
          "id": "title_line_height",
          "min": 0.8,
          "max": 2.5,
          "step": 0.1,
          "label": "Title Line Height",
          "default": 1.2
        },
        {
          "type": "range",
          "id": "title_letter_spacing",
          "min": -5,
          "max": 10,
          "step": 0.5,
          "unit": "px",
          "label": "Title Letter Spacing",
          "default": 0
        },
        {
          "type": "select",
          "id": "title_transform",
          "label": "Title Text Transform",
          "options": [
            {"value": "none", "label": "Normal"},
            {"value": "uppercase", "label": "Uppercase"},
            {"value": "lowercase", "label": "Lowercase"},
            {"value": "capitalize", "label": "Capitalize"}
          ],
          "default": "none"
        },
        {
          "type": "select",
          "id": "title_decoration",
          "label": "Title Text Decoration",
          "options": [
            {"value": "none", "label": "None"},
            {"value": "underline", "label": "Underline"},
            {"value": "line-through", "label": "Strikethrough"}
          ],
          "default": "none"
        },
        {
          "type": "header",
          "content": "Title Shadow"
        },
        {
          "type": "range",
          "id": "title_shadow_x",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow X Offset",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_shadow_y",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow Y Offset",
          "default": 2
        },
        {
          "type": "range",
          "id": "title_shadow_blur",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Shadow Blur",
          "default": 4
        },
        {
          "type": "color",
          "id": "title_shadow_color",
          "label": "Shadow Color",
          "default": "#000000"
        },
        {
          "type": "header",
          "content": "Title Spacing"
        },
        {
          "type": "range",
          "id": "title_margin_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Top",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Right",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Bottom",
          "default": 0
        },
        {
          "type": "range",
          "id": "title_margin_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Left",
          "default": 0
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            { "value": "image_left", "label": "Image left, text right" },
            { "value": "image_right", "label": "Image right, text left" }
          ],
          "default": "image_left"
        },
        {
          "type": "header",
          "content": "Image Settings"
        },
        {
          "type": "select",
          "id": "image_vertical_align",
          "label": "Image Vertical Alignment",
          "options": [
            { "value": "flex-start", "label": "Top" },
            { "value": "center", "label": "Middle" },
            { "value": "flex-end", "label": "Bottom" }
          ],
          "default": "center"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Desktop image"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Mobile image (optional)"
        },
        {
          "type": "range",
          "id": "image_width",
          "min": 200,
          "max": 600,
          "step": 20,
          "unit": "px",
          "label": "Image width",
          "default": 400
        },
        {
          "type": "range",
          "id": "image_margin",
          "min": 0,
          "max": 50,
          "step": 5,
          "unit": "px",
          "label": "Image margin",
          "default": 20
        },
        {
          "type": "header",
          "content": "Text Content"
        },
        {
          "type": "select",
          "id": "text_vertical_align",
          "label": "Text Vertical Alignment",
          "options": [
            { "value": "flex-start", "label": "Top" },
            { "value": "center", "label": "Middle" },
            { "value": "flex-end", "label": "Bottom" }
          ],
          "default": "center"
        },
        {
          "type": "range",
          "id": "text_padding",
          "min": 20,
          "max": 80,
          "step": 10,
          "unit": "px",
          "label": "Text column padding",
          "default": 40
        },
        {
          "type": "header",
          "content": "Text Block 1"
        },
        {
          "type": "richtext",
          "id": "text_content_1",
          "label": "Text content 1",
          "default": "<h2>Your heading here</h2>"
        },
        {
          "type": "color",
          "id": "text_color_1",
          "label": "Text color 1",
          "default": "#333333"
        },
        {
          "type": "range",
          "id": "text_size_1",
          "min": 6,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Font size 1",
          "default": 24
        },
        {
          "type": "select",
          "id": "text_align_1",
          "label": "Text alignment 1",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "left"
        },
        {
          "type": "header",
          "content": "Text Block 1 Advanced Typography"
        },
        {
          "type": "font_picker",
          "id": "text_font_1",
          "label": "Font Family 1",
          "default": "assistant_n4"
        },
        {
          "type": "range",
          "id": "text_line_height_1",
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "label": "Line Height 1",
          "default": 1.5
        },
        {
          "type": "range",
          "id": "text_letter_spacing_1",
          "min": -5,
          "max": 10,
          "step": 0.5,
          "unit": "px",
          "label": "Letter Spacing 1",
          "default": 0
        },
        {
          "type": "select",
          "id": "text_transform_1",
          "label": "Text Transform 1",
          "options": [
            {"value": "none", "label": "Normal"},
            {"value": "uppercase", "label": "Uppercase"},
            {"value": "lowercase", "label": "Lowercase"},
            {"value": "capitalize", "label": "Capitalize"}
          ],
          "default": "none"
        },
        {
          "type": "select",
          "id": "text_decoration_1",
          "label": "Text Decoration 1",
          "options": [
            {"value": "none", "label": "None"},
            {"value": "underline", "label": "Underline"},
            {"value": "line-through", "label": "Strikethrough"}
          ],
          "default": "none"
        },
        {
          "type": "header",
          "content": "Text Block 1 Shadow"
        },
        {
          "type": "range",
          "id": "text_shadow_x_1",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow X Offset 1",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_shadow_y_1",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow Y Offset 1",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_shadow_blur_1",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Shadow Blur 1",
          "default": 0
        },
        {
          "type": "color",
          "id": "text_shadow_color_1",
          "label": "Shadow Color 1",
          "default": "#000000"
        },
        {
          "type": "header",
          "content": "Text Block 1 Spacing"
        },
        {
          "type": "range",
          "id": "text_margin_top_1",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Top 1",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_right_1",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Right 1",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_bottom_1",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Bottom 1",
          "default": 20
        },
        {
          "type": "range",
          "id": "text_margin_left_1",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Left 1",
          "default": 0
        },
        {
          "type": "header",
          "content": "Text Block 2"
        },
        {
          "type": "richtext",
          "id": "text_content_2",
          "label": "Text content 2",
          "default": "<p>Your paragraph text goes here.</p>"
        },
        {
          "type": "color",
          "id": "text_color_2",
          "label": "Text color 2",
          "default": "#666666"
        },
        {
          "type": "range",
          "id": "text_size_2",
          "min": 6,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Font size 2",
          "default": 16
        },
        {
          "type": "select",
          "id": "text_align_2",
          "label": "Text alignment 2",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "left"
        },
        {
          "type": "header",
          "content": "Text Block 2 Advanced Typography"
        },
        {
          "type": "font_picker",
          "id": "text_font_2",
          "label": "Font Family 2",
          "default": "assistant_n4"
        },
        {
          "type": "range",
          "id": "text_line_height_2",
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "label": "Line Height 2",
          "default": 1.5
        },
        {
          "type": "range",
          "id": "text_letter_spacing_2",
          "min": -5,
          "max": 10,
          "step": 0.5,
          "unit": "px",
          "label": "Letter Spacing 2",
          "default": 0
        },
        {
          "type": "select",
          "id": "text_transform_2",
          "label": "Text Transform 2",
          "options": [
            {"value": "none", "label": "Normal"},
            {"value": "uppercase", "label": "Uppercase"},
            {"value": "lowercase", "label": "Lowercase"},
            {"value": "capitalize", "label": "Capitalize"}
          ],
          "default": "none"
        },
        {
          "type": "select",
          "id": "text_decoration_2",
          "label": "Text Decoration 2",
          "options": [
            {"value": "none", "label": "None"},
            {"value": "underline", "label": "Underline"},
            {"value": "line-through", "label": "Strikethrough"}
          ],
          "default": "none"
        },
        {
          "type": "header",
          "content": "Text Block 2 Shadow"
        },
        {
          "type": "range",
          "id": "text_shadow_x_2",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow X Offset 2",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_shadow_y_2",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow Y Offset 2",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_shadow_blur_2",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Shadow Blur 2",
          "default": 0
        },
        {
          "type": "color",
          "id": "text_shadow_color_2",
          "label": "Shadow Color 2",
          "default": "#000000"
        },
        {
          "type": "header",
          "content": "Text Block 2 Spacing"
        },
        {
          "type": "range",
          "id": "text_margin_top_2",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Top 2",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_right_2",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Right 2",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_bottom_2",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Bottom 2",
          "default": 20
        },
        {
          "type": "range",
          "id": "text_margin_left_2",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Left 2",
          "default": 0
        },
        {
          "type": "header",
          "content": "Text Block 3"
        },
        {
          "type": "richtext",
          "id": "text_content_3",
          "label": "Text content 3",
          "default": "<p>Additional text or call-to-action.</p>"
        },
        {
          "type": "color",
          "id": "text_color_3",
          "label": "Text color 3",
          "default": "#999999"
        },
        {
          "type": "range",
          "id": "text_size_3",
          "min": 6,
          "max": 120,
          "step": 2,
          "unit": "px",
          "label": "Font size 3",
          "default": 14
        },
        {
          "type": "select",
          "id": "text_align_3",
          "label": "Text alignment 3",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
          ],
          "default": "left"
        },
        {
          "type": "header",
          "content": "Text Block 3 Advanced Typography"
        },
        {
          "type": "font_picker",
          "id": "text_font_3",
          "label": "Font Family 3",
          "default": "assistant_n4"
        },
        {
          "type": "range",
          "id": "text_line_height_3",
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "label": "Line Height 3",
          "default": 1.5
        },
        {
          "type": "range",
          "id": "text_letter_spacing_3",
          "min": -5,
          "max": 10,
          "step": 0.5,
          "unit": "px",
          "label": "Letter Spacing 3",
          "default": 0
        },
        {
          "type": "select",
          "id": "text_transform_3",
          "label": "Text Transform 3",
          "options": [
            {"value": "none", "label": "Normal"},
            {"value": "uppercase", "label": "Uppercase"},
            {"value": "lowercase", "label": "Lowercase"},
            {"value": "capitalize", "label": "Capitalize"}
          ],
          "default": "none"
        },
        {
          "type": "select",
          "id": "text_decoration_3",
          "label": "Text Decoration 3",
          "options": [
            {"value": "none", "label": "None"},
            {"value": "underline", "label": "Underline"},
            {"value": "line-through", "label": "Strikethrough"}
          ],
          "default": "none"
        },
        {
          "type": "header",
          "content": "Text Block 3 Shadow"
        },
        {
          "type": "range",
          "id": "text_shadow_x_3",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow X Offset 3",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_shadow_y_3",
          "min": -20,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Shadow Y Offset 3",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_shadow_blur_3",
          "min": 0,
          "max": 30,
          "step": 1,
          "unit": "px",
          "label": "Shadow Blur 3",
          "default": 0
        },
        {
          "type": "color",
          "id": "text_shadow_color_3",
          "label": "Shadow Color 3",
          "default": "#000000"
        },
        {
          "type": "header",
          "content": "Text Block 3 Spacing"
        },
        {
          "type": "range",
          "id": "text_margin_top_3",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Top 3",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_right_3",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Right 3",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_bottom_3",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Bottom 3",
          "default": 0
        },
        {
          "type": "range",
          "id": "text_margin_left_3",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Margin Left 3",
          "default": 0
        },
        {
          "type": "header",
          "content": "Layout"
        },
        {
          "type": "select",
          "id": "content_width_type",
          "label": "Content width",
          "options": [
            { "value": "full", "label": "Full width" },
            { "value": "fixed", "label": "Fixed pixels" },
            { "value": "relative", "label": "Percentage" }
          ],
          "default": "full"
        },
        {
          "type": "range",
          "id": "content_width_fixed",
          "min": 600,
          "max": 1400,
          "step": 50,
          "unit": "px",
          "label": "Fixed width",
          "default": 1200
        },
        {
          "type": "range",
          "id": "content_width_percent",
          "min": 50,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Width percentage",
          "default": 80
        },
        {
          "type": "header",
          "content": "Spacing"
        },
        {
          "type": "range",
          "id": "content_padding_top",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding top",
          "default": 20
        },
        {
          "type": "range",
          "id": "content_padding_right",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding right",
          "default": 20
        },
        {
          "type": "range",
          "id": "content_padding_bottom",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding bottom",
          "default": 20
        },
        {
          "type": "range",
          "id": "content_padding_left",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "px",
          "label": "Padding left",
          "default": 20
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Content Slider C",
      "blocks": [
        {
          "type": "image_slide"
        },
        {
          "type": "video_slide"
        },
        {
          "type": "mixed_content_slide"
        }
      ]
    }
  ]
}
{% endschema %}
